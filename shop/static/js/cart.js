var modes={0:"Személyes átvétel",1:"Csomagkuldo",2:"FoxPost",3:"Házhozszállítás"};function receiveMessage(e){if("https://cdn.foxpost.hu"==e.origin){var a=JSON.parse(e.data);$("#id_fox_post").val(a.name+";"+a.address),$("#id_delivery_type").val(modes[2]),$("#collapseOne input").removeAttr("required").val(""),$("#id_delivery_name").val(""),$("#id_address").val(""),$("#id_postal_code").val(""),$("#id_city").val(""),$("#id_note").val(""),$("#id_firstname").val(""),$("#id_lastname").val(""),$("#delivery_full_name").val(""),$("#d_address").val(""),$("#d_zip").val(""),$("#d_city").val(""),$("#d_note").val(""),$("#first_name").val(""),$("#last_name").val(""),$("#delivery_safe").val(""),$("#id_csomagkuldo").val(""),removeDeliveryRequired();var l=$("#fox_price").text(),t=$("#total_price").attr("data-price"),d=parseInt(l)+parseInt(t);$("#total_price").text(d+" Ft"),void 0!==a.name&&($("body").prepend('<div id="modal-wrapper"><div id="modal-body"><p>A következő automatát választottad: '+a.name+'</p><div class="modal-button-wrapper"><button class="modal-close" onClick="close_modal()">Bezár</button></div></div></div>'),$("body").prepend('<div id="foxpost-modal-backdrop" />'))}}function close_modal(){$("#modal-wrapper").remove(),$("#foxpost-modal-backdrop").remove()}$("document").ready(function(){if(localStorage.getItem("cart")){var e=JSON.parse(localStorage.getItem("cart"));$("#full_name").val(e.full_name),$("#first_name").val(e.first_name),$("#last_name").val(e.last_name),$("#email_address").val(e.email),$("#phone_number").val(e.phone),$("#billing_address").val(e.billing_address),$("#billing_postal_code").val(e.billing_postal_code),$("#billing_city").val(e.billing_city),$("#delivery_full_name").val(e.delivery_name),$("#d_address").val(e.address),$("#d_zip").val(e.postal_code),$("#d_city").val(e.city),$("#d_note").val(e.note),$("#id_csomagkuldo").val(e.csomagkuldo),$("#id_fox_post").val(e.fox_post),$("#id_delivery_type").val(modes[e.delivery_type]),"0"==e.delivery_type?($("#personal h5 button").attr("aria-expanded","true"),$("#personal h5 button").addClass("collapsed"),$("#collapseOne").addClass("show"),$("#first_name").attr("required","required"),$("#last_name").attr("required","required")):"1"==e.delivery_type?($("#csomagkuldo h5 button").attr("aria-expanded","true"),$("#csomagkuldo h5 button").addClass("collapsed"),$("#collapseFour").addClass("show"),$("#collapseOne").removeClass("show")):"2"==e.delivery_type?($("#foxt-post h5 button").attr("aria-expanded","true"),$("#foxt-post h5 button").addClass("collapsed"),$("#collapseTwo").addClass("show"),$("#collapseOne").removeClass("show")):"3"==e.delivery_type&&($("#delivery h5 button").attr("aria-expanded","true"),$("#delivery h5 button").addClass("collapsed"),$("#collapseThree").addClass("show"),$("#collapseOne").removeClass("show"))}else $("#id_delivery_type").val(modes[0]);if($("#collapseTwo").hasClass("show")){var a=$("#fox_price").text(),l=$("#total_price").attr("data-price"),t=parseInt(a)+parseInt(l);$("#total_price").text(t+" Ft")}else if($("#collapseThree").hasClass("show")){a=$("#delivery_price").text(),l=$("#total_price").attr("data-price"),t=parseInt(a)+parseInt(l);$("#total_price").text(t+" Ft")}else if($("#collapseFour").hasClass("show")){inlineFullHU();a=$("#csomagkuldo_price").text(),l=$("#total_price").attr("data-price"),t=parseInt(a)+parseInt(l);$("#total_price").text(t+" Ft")}}),$("#personal button").on("click",function(e){$("#collapseOne input").attr("required","true").val(""),$("#id_fox_post").val(""),$("#id_delivery_name").val(""),$("#id_address").val(""),$("#id_postal_code").val(""),$("#id_city").val(""),$("#id_note").val(""),$("#delivery_full_name").val(""),$("#d_address").val(""),$("#d_zip").val(""),$("#d_city").val(""),$("#d_note").val(""),$("#delivery_safe").val(""),$("#id_csomagkuldo").val(""),$("#id_delivery_type").val(modes[0]),removeDeliveryRequired();var a=$("#total_price").attr("data-price");$("#total_price").text(a+" Ft")}),$("#delivery button").on("click",function(e){$("#collapseOne input").removeAttr("required").val(""),$("#collapseThree input:not(#d_note)").attr("required","true").val(""),$("#id_fox_post").val(""),$("#id_firstname").val(""),$("#id_lastname").val(""),$("#first_name").val(""),$("#last_name").val(""),$("#delivery_safe").val(""),$("#id_csomagkuldo").val(""),$("#id_delivery_type").val(modes[3]);var a=$("#delivery_price").text(),l=$("#total_price").attr("data-price"),t=parseInt(a)+parseInt(l);$("#total_price").text(t+" Ft")}),$("#delivery-form").one("submit",function(e){var a={},l=$("#full_name").val();if($("#id_fullname").val(l),a.full_name=l,l=$("#email_address").val(),$("#id_email").val(l),a.email=l,l=$("#phone_number").val(),$("#id_phone").val(l),a.phone=l,l=$("#billing_address").val(),$("#id_billing_address").val(l),a.billing_address=l,l=$("#billing_postal_code").val(),$("#id_billing_postal_code").val(l),a.billing_postal_code=l,l=$("#billing_city").val(),$("#id_billing_city").val(l),a.billing_city=l,void 0!==(l=$("#first_name").val())&&""!=l?($("#id_firstname").val(l),a.first_name=l):a.first_name="",void 0!==(l=$("#last_name").val())&&""!=l?($("#id_lastname").val(l),a.last_name=l):a.last_name="",void 0!==(l=$("#delivery_full_name").val())&&""!=l?($("#id_delivery_name").val(l),a.delivery_name=l):a.delivery_name="",void 0!==(l=$("#d_address").val())?($("#id_address").val(l),a.address=l):a.address="",void 0!==(l=$("#d_zip").val())?($("#id_postal_code").val(l),a.postal_code=l):a.postal_code="",void 0!==(l=$("#d_city").val())?($("#id_city").val(l),a.city=l):a.city="",void 0!==(l=$("#d_note").val())?($("#id_note").val(l),a.note=l):a.note=l,""!=a.first_name)a.delivery_type="0",a.csomagkuldo="",a.fox_post="";else if(""!=$("#id_fox_post").val()&&void 0!==$("#id_fox_post").val())a.delivery_type="2",a.fox_post=$("#id_fox_post").val(),a.csomagkuldo="";else if(""!=$("#id_csomagkuldo").val()&&void 0!==$("#id_csomagkuldo").val())a.delivery_type="1",a.csomagkuldo=$("#id_csomagkuldo").val(),a.fox_post="";else{if(""==a.address)return!1;a.delivery_type="3",a.csomagkuldo="",a.fox_post=""}window.removeEventListener("message",receiveMessage,!1),localStorage.setItem("cart",JSON.stringify(a)),$(this).submit()}),window.addEventListener("message",receiveMessage,!1),$("document").ready(function(){$("#errorModal .modal-body .messages").length>0&&$("#error_button").click()});var packetaApiKey=$("meta[name=cs_a]").attr("content");function clear(){for(var e=document.querySelectorAll(".method-detail"),a=0;a<e.length;a++)e[a].innerText="",e[a].style.height="0";Packeta.Widget.close()}function inlineFullHU(){var e=document.getElementById("csomagkuldo-body");clear(),e.style.height="600px",Packeta.Widget.pick(packetaApiKey,showSelectedPickupPoint.bind(e),{country:"hu",language:"hu"},e)}function showSelectedPickupPoint(e){var a=document.getElementById("csomagkuldo-body");$("#collapseFour").removeClass("show"),a.style.height="0px";var l=e?e.name:"None";$("#id_csomagkuldo").val(l),$("#id_delivery_type").val(modes[1]),$("#collapseOne input").removeAttr("required").val(""),$("#id_fox_post").val(""),$("#id_delivery_name").val(""),$("#id_address").val(""),$("#id_postal_code").val(""),$("#id_city").val(""),$("#id_note").val(""),$("#id_firstname").val(""),$("#id_lastname").val(""),$("#delivery_full_name").val(""),$("#d_address").val(""),$("#d_zip").val(""),$("#d_city").val(""),$("#d_note").val(""),$("#first_name").val(""),$("#last_name").val(""),$("#delivery_safe").val(""),removeDeliveryRequired();var t=$("#csomagkuldo_price").text(),d=$("#total_price").attr("data-price"),o=parseInt(t)+parseInt(d);$("#total_price").text(o+" Ft"),"None"!==l&&($("body").prepend('<div id="modal-wrapper"><div id="modal-body"><p>A következő automatát választottad: '+l+'</p><div class="modal-button-wrapper"><button class="modal-close" onClick="close_modal()">Bezár</button></div></div></div>'),$("body").prepend('<div id="foxpost-modal-backdrop" />'))}function removeDeliveryRequired(){$("#delivery_full_name").removeAttr("required"),$("#d_address").removeAttr("required"),$("#d_zip").removeAttr("required"),$("#d_city").removeAttr("required")}